import Layout from 'lib/components/layout'
import {
  Display,
  Image,
  Grid,
  Tree,
  Rating,
  Note,
  Divider,
  Loading,
  Drawer,
  Card,
} from '@geist-ui/core'

export const meta = {
  title: 'setTimeoutè¾“å‡º',
  date: '2022-04-10T14:09:17.242Z',
  description: '',
  image: '',
}

```js
let func = () => {
  console.log(1)
}
setTimeout(() => {
  func = () => {
    console.log(2)
  }
}, 0)

setTimeout(func, 100)
```

**è¾“å‡ºç»“æœï¼š**

```
--------
1
--------
```

**åˆ†æè¿‡ç¨‹ï¼š**
è¿™æ®µä»£ç é‡Œä¸å­˜åœ¨ [[å‡½æ•°å£°æ˜]] _function declaration_ï¼Œfunc æ˜¯ [[å‡½æ•°è¡¨è¾¾å¼]] _function expression_

**line1 --- 3ï¼š**ä½¿ç”¨ let å£°æ˜å˜é‡ funcï¼ŒæŒ‡å‘ä¸€ä¸ªå‡½æ•°ã€‚

**line4 --- 8ï¼š**é‡åˆ°äº† setTimeoutï¼ŒsetTimeout çš„å‚æ•°(å›è°ƒå‡½æ•°)ä¼šåœ¨ä¸»ä»£ç æ‰§è¡Œå®Œæˆåï¼ŒåŠ å…¥åˆ° task queueã€‚

**line10ï¼š**åˆé‡åˆ°äº†ä¸€ä¸ª setTimeoutï¼Œå‚æ•°æ˜¯ func å˜é‡ï¼Œ100ms å func è¢«åŠ å…¥åˆ° task queue.

ä¸»ä»£ç æ‰§è¡Œç»“æŸ ğŸ”š

line4---8 çš„å›è°ƒå‡½æ•°è¢«åŠ å…¥åˆ°äº† task queue

æ­¤æ—¶ 100ms è¿˜æ²¡åˆ°å“¦ï¼Œæ‰€ä»¥å–å‡º line4---8 çš„å›è°ƒå‡½æ•°æ‰§è¡Œæ‰ï¼Œæ‰§è¡Œå®Œåï¼Œfunc æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•°

100ms æ—¶é—´åˆ°äº†ï¼Œå°† line10 çš„ func åŠ å…¥åˆ° task queue
æ­¤æ—¶æ²¡æœ‰å…¶ä»–çš„ä»»åŠ¡ï¼Œå–å‡º func æ‰§è¡Œï¼Œæ­¤å¤„æœ‰é™·é˜±ï¼å¤§å¤šäººä¼šè§‰å¾—**è¾“å‡º 2**ï¼Œå› ä¸º func åœ¨ä¹‹å‰æŒ‡å‘äº†å¦ä¸€ä¸ªç®­å¤´å‡½æ•°(ä»£ç é‡Œè¾“å‡º 2)ï¼Œä½†å…¶å®ä¸æ˜¯ï¼ŒsetTimeout å¹¶ä¸ä¼šæ„ŸçŸ¥åˆ° func å˜é‡çš„å˜åŒ–ï¼Œå®ƒæ¥æ”¶çš„å…¶å®æ˜¯å˜é‡åœ°å€ï¼Œåªä¸è¿‡æ˜¯é€šè¿‡ func è¿™ä¸ªè½½ä½“æ¥ä¼ è¾¾çš„å˜é‡åœ°å€ï¼Œåç»­ func æ€ä¹ˆå˜ï¼Œéƒ½ä¸ setTimeout æ— å…³äº†ï¼Œè¿™å°±æ˜¯ JS çš„æ™¦æ¶©ä¹‹å¤„å§ã€‚

**å˜ä½“ï¼š**
å˜ä½“ 1ï¼š

```js
const obj = {
  func: () => {
    console.log(1)
  },
}
setTimeout(() => {
  obj.func = () => {
    console.log(2)
  }
}, 0)

setTimeout(obj.func, 100)
```

ä¾æ—§ä¼šè¾“å‡º 1ã€‚

å˜ä½“ 2ï¼š

```js
let func = () => {
  console.log(1)
}
setTimeout(() => {
  func = () => {
    console.log(2)
  }
}, 0)

setTimeout(() => {
  func()
}, 100)
```

è¿™æ¬¡ä¼šè¾“å‡º 2ï¼è¿™ä¸ªä¾‹å­ä¸­ func å»¶è¿Ÿæ‰§è¡Œï¼Œä¸å†æ˜¯ setTimeout çš„å‚æ•°äº†ï¼Œå…·æœ‰å»¶è¿ŸåŠ¨æ€æ€§ã€‚

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
